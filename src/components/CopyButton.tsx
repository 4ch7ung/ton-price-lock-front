import { v4 as uuidv4 } from 'uuid';

export function CopyButton({ onClick }: { onClick: () => void }) {
  let copyId = `copy-button-${uuidv4()}`;
  let okId = `copy-ok-${uuidv4()}`;
  const svgCopy = <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" className="copy-button-icon" data-id={copyId} viewBox="0 0 16 16">
    <path d="M5.447 2.396c-.272.534-.272 1.234-.272 2.635v.005H5.01c-1.4 0-2.1 0-2.635.272a2.5 2.5 0 0 0-1.093 1.093c-.272.535-.272 1.235-.272 2.635v1c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.093c.535.272 1.235.272 2.635.272h1c1.4 0 2.1 0 2.635-.272a2.5 2.5 0 0 0 1.093-1.093c.272-.535.272-1.235.272-2.635v-.005h.165c1.4 0 2.1 0 2.634-.273a2.5 2.5 0 0 0 1.093-1.092c.273-.535.273-1.235.273-2.635v-1c0-1.4 0-2.1-.273-2.635a2.5 2.5 0 0 0-1.092-1.093c-.535-.272-1.235-.272-2.636-.272h-1c-1.4 0-2.1 0-2.634.272a2.5 2.5 0 0 0-1.093 1.093M10.01 9.03h.765c.84 0 1.26 0 1.58-.164a1.5 1.5 0 0 0 .656-.655c.164-.321.164-.741.164-1.581v-2.2c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656c-.321-.163-.741-.163-1.582-.163h-2.2c-.84 0-1.26 0-1.58.163a1.5 1.5 0 0 0-.656.656c-.163.32-.163.74-.163 1.58v.606c1.29 0 1.957.01 2.47.272a2.5 2.5 0 0 1 1.093 1.093c.272.534.272 1.233.272 2.63m-8-.595c0-.84 0-1.26.164-1.58a1.5 1.5 0 0 1 .655-.656c.32-.164.74-.164 1.581-.164h2.2c.84 0 1.26 0 1.581.164a1.5 1.5 0 0 1 .656.655c.163.32.163.741.163 1.581v2.2c0 .84 0 1.26-.163 1.581a1.5 1.5 0 0 1-.656.656c-.32.163-.74.163-1.581.163h-2.2c-.84 0-1.26 0-1.581-.163a1.5 1.5 0 0 1-.655-.656c-.164-.32-.164-.74-.164-1.58z">
    </path>
  </svg>
  const svgOk = <svg width="14" height="12" viewBox="0 0 14 12" fill="none" display='none' style={{fill: "#62D488"}} data-id={okId} xmlns="http://www.w3.org/2000/svg">
    <path d="M12.72 0.759976C12.71 0.762476 12.7 0.766226 12.69 0.769976C12.6063 0.791226 12.5338 0.844976 12.49 0.919976L5.95 11.06L1.45 6.99998C1.37125 6.89998 1.24 6.85623 1.11625 6.88873C0.992504 6.92123 0.901254 7.02498 0.882504 7.15123C0.863754 7.27748 0.921254 7.40248 1.03 7.46998L5.8 11.79C5.87 11.8512 5.96375 11.8787 6.05625 11.865C6.14875 11.8512 6.23 11.7987 6.28 11.72L13.03 1.25998C13.1038 1.15498 13.1075 1.01623 13.04 0.907476C12.9725 0.798726 12.8463 0.741226 12.72 0.759976Z" />
  </svg>
  const click = () => {
    onClick();
    const svgCopy = document.querySelector(`[data-id="${copyId}"]`);
    const svgOk = document.querySelector(`[data-id="${okId}"]`);
    svgCopy?.setAttribute('display', 'none');
    svgOk?.setAttribute('display', 'block');
    setTimeout(() => {
      svgCopy?.setAttribute('display', 'block');
      svgOk?.setAttribute('display', 'none');
    }, 1000);
  };
  return <div style={{width: 16, height: 16}} onClick={click}>
    {svgCopy}
    {svgOk}
  </div>;
};